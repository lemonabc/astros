前面提到，Astro内部有2个Web服务，一个动态服务器，一个静态服务器。模块化则在动态服务器中实现，在介绍某块之前，必须介绍如何创建页面及引用资源。要创建一个页面，你需要以下几个步骤：

一、创建路由
Astro是基于Express实现的，要访问一个页面，同Express一样，需要建立一个路由。Astro的路由默认存储在`routes`目录，语法和Express一样，不同之处在于你不用手动加载，Astro会自动遍历`routes`目录下的所有文件，并挂载。以127.0.0.1:3100/user/login为例：

    root[dir]
        routes[dir]
            user[dir]   不要问为什么多了一级目录，我们是支持多级的。当然，你不用也可以。
                login.js

**loign.js**
    
    var router = require('express').Router(); // 新建一个 router
    router.get('user/login', function(req, res) {
        res.render('user/login', {
            title:'登录'
        }, function(err, html){
            res.set('Content-Type', 'text/html');
            res.end(html)
        });
    });
    
    module.exports = router


二、 建立对应的模板

上面的路由引用了`login`模板（没错，就是这一句：`res.render('user/login', ...`)，Astro的模板默认存储在`tpls`目录。所以，建立模板吧。

    root[dir]
        tpls[dir]
            user[dir]
                login[dir]
                    login.html
                    login.less
                    login.js
                    img[dir] 
    
##### root/tpls/user/login/login.html

    
    <!DOCTYPE html>
    <html>
        <head>
            <title>{{title}}-Astro</title>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <link rel="stylesheet" href="{{$g.cdn}}/css/p/{{pageName}}.css?v={{$ver}}"/>
        </head>
        <body>
            <div id="astro-wrap" class="g-main">
                <div id="bd" class="g-wrap">
                    <form>
                        <div class="form-item">
                            <input placeholder="用户名" />
                        </div>
                        <div class="form-item">
                            <input placeholder="密码" type="password" />
                        </div>
                        <div class="form-submit">
                            <button>提交</button>
                        </div>
                    </form>
                </div>
            </div>
            <script src="{{$g.cdn}}/js/p/{{pageName}}.js?v={{$ver}}">
    </html>


也许你已经注意到了，引用页面的JS和CSS分别通过：

    <script src="http://127.0.0.1:3101/js/p/home.js"
    
    <link rel="stylesheet" href="http://127.0.0.1:3101/css/p/home.css" />
    

